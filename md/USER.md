# 사용자 서비스

이 문서는 Spring Boot 애플리케이션에서 `UserService` 인터페이스의 구현체인 `UserServiceImpl` 클래스에 대한 설명입니다. 이 서비스는 사용자 등록, 로그인, 사용자 정보 관리 기능을 제공합니다.

## 기능

1. **사용자 등록**:
    - 미리 정의된 허용 사용자 목록에 따라 특정 사용자만 등록할 수 있도록 합니다.
    - 사용자 ID가 이미 등록되어 있는지 확인합니다.
    - 비밀번호는 `단방향 솔트 해시 암호화 방식 - BCrypt`을 사용하여 암호화하고, 주민등록번호는 `양방향 대칭키 암호화 방식 - AES `을 사용하여 암호화합니다.
    - 사용자 정보를 데이터베이스에 저장합니다.

2. **사용자 로그인**:
    - 사용자 ID로 사용자 정보를 가져옵니다.
    - `PasswordEncoder`를 사용하여 비밀번호를 확인합니다.
    - `JwtUtil`을 사용하여 JWT 토큰을 생성하고 반환합니다.

3. **사용자 정보 관리**:
    - 사용자 ID로 사용자 정보를 가져오는 메서드를 제공합니다.
    - 주민등록번호의 형식과 구조를 검증하는 메서드를 포함합니다.

## 코드 설명

1. **사용자 등록**:
    - `signup` 메서드는 먼저 `ALLOWED_USERS` 맵에 따라 사용자가 등록 가능한지 확인합니다.
    - 그 다음 사용자 ID가 이미 등록되어 있는지 데이터베이스에서 확인합니다.
    - 비밀번호는 `PasswordEncoder`를 사용하여 암호화하고, 주민등록번호는 `RegistrationEncryption`을 사용하여 암호화합니다.
    - 사용자 정보를 데이터베이스에 저장하고, 저장된 사용자 정보를 `ResponseEntity`로 반환합니다.
    - 단, 주민등록번호가 비정상적일 경우 에러를 반환합니다.
   
2. **사용자 로그인**:
    - `login` 메서드는 먼저 `loadUserByUserId` 메서드를 사용하여 사용자 정보를 가져옵니다.
    - 그 다음 `PasswordEncoder`를 사용하여 비밀번호를 확인합니다.
    - 비밀번호가 유효하면 `JwtUtil`을 사용하여 JWT 토큰을 생성하고 반환합니다.

3. **사용자 정보 관리**:
    - `loadUserByUserId` 메서드는 사용자 ID로 데이터베이스에서 사용자 정보를 가져옵니다.
    - `validateRegNo` 메서드는 주민등록번호의 형식과 구조를 검증합니다.